-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- 맛집리스트 Table Create SQL
CREATE TABLE 맛집리스트
(
    `list_num`    INT UNSIGNED    NOT NULL    AUTO_INCREMENT COMMENT '맛집리스트 번호', 
    `list_name`   VARCHAR(300)    NOT NULL    COMMENT '맛집리스트 이름', 
    `list_intro`  VARCHAR(300)    NOT NULL    COMMENT '맛집리스트 설명', 
     PRIMARY KEY (list_num)
);

ALTER TABLE 맛집리스트 COMMENT 'list';


-- 맛집 Table Create SQL
CREATE TABLE 맛집
(
    `place_num`        INT UNSIGNED    NOT NULL    AUTO_INCREMENT COMMENT '맛집 번호', 
    `place_name`       VARCHAR(300)    NOT NULL    COMMENT '맛집 이름', 
    `place_addr`       VARCHAR(300)    NOT NULL    COMMENT '맛집 주소', 
    `place_phone`      VARCHAR(300)    NOT NULL    COMMENT '맛집 전화번호', 
    `place_parking`    CHAR(1)         NOT NULL    COMMENT '맛집 주차', 
    `place_menu`       INT             NOT NULL    COMMENT '맛집 메뉴', 
    `place_mainImage`  VARCHAR(60)     NOT NULL    COMMENT '맛집 대표이미지', 
    `place_subImage`   INT             NOT NULL    COMMENT '맛집 서브이미지', 
    `list_num`         INT UNSIGNED    NULL        COMMENT '맛집리스트 번호', 
     PRIMARY KEY (place_num)
);

ALTER TABLE 맛집 COMMENT 'place';

ALTER TABLE 맛집
    ADD CONSTRAINT FK_맛집_list_num_맛집리스트_list_num FOREIGN KEY (list_num)
        REFERENCES 맛집리스트 (list_num) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- 이미지 Table Create SQL
CREATE TABLE 이미지
(
    `image_num`       INT UNSIGNED    NOT NULL    AUTO_INCREMENT COMMENT '이미지 번호', 
    `image_name`      VARCHAR(30)     NOT NULL    COMMENT '이미지 이름', 
    `image_path`      VARCHAR(300)    NOT NULL    COMMENT '이미지 경로', 
    `image_folder`    VARCHAR(300)    NOT NULL    COMMENT '이미지 폴더', 
    `image_size`      VARCHAR(30)     NULL        COMMENT '이미지 사이즈', 
    `place_subImage`  INT             NOT NULL    COMMENT '맛집 서브이미지', 
     PRIMARY KEY (image_num)
);

ALTER TABLE 이미지 COMMENT 'image';

ALTER TABLE 이미지
    ADD CONSTRAINT FK_이미지_place_subImage_맛집_place_subImage FOREIGN KEY (place_subImage)
        REFERENCES 맛집 (place_subImage) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- 메뉴 Table Create SQL
CREATE TABLE 메뉴
(
    `menu_num`    INT UNSIGNED    NOT NULL    AUTO_INCREMENT COMMENT '메뉴 번호', 
    `menu_name`   VARCHAR(300)    NOT NULL    COMMENT '메뉴 이름', 
    `menu_price`  INT             NOT NULL    COMMENT '메뉴 가격', 
    `place_menu`  INT             NOT NULL    COMMENT '맛집 메뉴', 
     PRIMARY KEY (menu_num)
);

ALTER TABLE 메뉴 COMMENT 'menu';

ALTER TABLE 메뉴
    ADD CONSTRAINT FK_메뉴_place_menu_맛집_place_menu FOREIGN KEY (place_menu)
        REFERENCES 맛집 (place_menu) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- 유저 Table Create SQL
CREATE TABLE 유저
(
    `user_num`      INT UNSIGNED    NOT NULL    AUTO_INCREMENT COMMENT '유저 번호', 
    `user_id`       VARCHAR(30)     NOT NULL    COMMENT '유저 아이디', 
    `user_pw`       VARCHAR(30)     NOT NULL    COMMENT '유저 비밀번호', 
    `user_name`     VARCHAR(30)     NOT NULL    COMMENT '유저 이름', 
    `user_signUp`   VARCHAR(300)    NOT NULL    COMMENT '유저 가입일자', 
    `user_manager`  CHAR(1)         NOT NULL    COMMENT '유저 관리자식별', 
     PRIMARY KEY (user_num)
);

ALTER TABLE 유저 COMMENT 'user';


